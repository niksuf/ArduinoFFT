# Преобразование Фурье на платформе Arduino

## Описание проекта

Стенд на отладочной плате с микроконтроллером Atmega 328P представлен на рисунке ниже. Будем проводить исследования на частотах слышимого диапазона (1 Гц – 20 кГц). 
На борту данного микроконтроллера находится АЦП с разрешением 10 бит, которых будет достаточно для оцифровки сигналов. Для визуального отображения информации 
воспользуемся LCD дисплеем 1602, подключенным посредством шины I2C.

![scheme_struct](https://github.com/niksuf/ArduinoFFT/blob/master/structural_scheme.png)

Так как с ПК посредством jack-кабеля 3.5 мм приходит слишком слабый сигнал, поставим резистивный делитель. Для того, чтобы избавиться от постоянной составляющей сигнала 
поставим конденсатор емкостью 10 нФ.

После проверки работоспособности схемы, немного переработаем ее для того, чтобы считать показания с микропроцессора и построить графики по полученным данным. Будем 
передавать данные посредством COM-порта.

Для исследования влияния шумов на собранный усилитель воспользуемся онлайн генератором шумов (https://29a.ch/noise-generator/), меняя процентное соотношение заполнения 
белого шума. Для подачи сигнала будем использовать онлайн генератор частот (https://www.szynalski.com/tone-generator/).

Значения, которые приходят в COM-порт являются сырыми оцифрованными значениями напряжения. Так как у нас АЦП разрядностью 10 бит, в порт приходят значения от 0 до 1023. 
Опорное напряжение составляет 5 В. Чтобы перевести сырые значения в напряжения, воспользуемся формулой: U<sub>вх</sub> = 5 * V / 1024.

Более подробная схема для сборки стенда:

![scheme_connection](https://github.com/niksuf/ArduinoFFT/blob/master/connection_scheme.png)

## Скорость работы алгоритма

Число отсчетов N | Запуск, мс | Реорганизация, мкс | Функция-окно, мкс | Линейный формат (16 бит), мкс | Линейный формат (8 бит), мкс| Логариф-мический формат, мкс
--- | --- | --- | --- | --- | --- | --- |
256 | 6.32 | 412 | 608 | 588 | 470 | 608
128 | 2.59 | 193 | 304 | 286 | 234 | 290
64 | 1.02 | 97 | 152 | 145 | 114 | 144
32 | 0.37 | 41 | 76 | 80 | 59 | 74
16 | 0.12 | 21 | 37 | 46 | 30 | 39

Примечание: Значения для линейного формата (8 бит) – приблизительные, так как могут немного варьироваться из-за директивы SCALE. Директива SCALE отвечает за 
масштабирование конечных результатов вычислений. Поскольку 8 бит – слабое разрешение, скорее всего придется масштабировать данные, чтобы максимизировать их до полного 
диапазона.

## Использование памяти

Число отсчетов N | Запуск, S/F, байт | Реорганизация, F, байт | Функция-окно, F, байт | Линейный формат (16 бит), S/F, байт | Линейный формат (8 бит), S/F, байт | Логариф-мический формат, S/F, байт
--- | --- | --- | --- | --- | --- | --- |
256 | 1k/952 | 120 | 512 | 256/768 | 128/640 | 128/256
128 | 512/448 | 56| 256 | 128/768 | 64/640 | 64/256
64 | 256/200 | 28 | 128 | 64/768 | 32/640 | 32/256
32 | 128/80 | 12 | 64 | 32/768 | 16/640 | 16/256
16 | 64/24 | 6 | 32 | 16/768 | 8/640 | 8/256

## Установка и прошивка

1. Скачать репозиторий к себе на компьютер при помощи команды: ```git clone https://github.com/niksuf/ArduinoFFT```
2. Установить библиотеки в\
```C:\Program Files (x86)\Arduino\libraries\``` (Windows x64)\
```C:\Program Files\Arduino\libraries\``` (Windows x86)
3. Подключить Ардуино к компьютеру.
4. Запустить файл прошивки (который имеет расширение ```*.ino```)
5. Настроить IDE (COM порт, модель Arduino)
6. Настроить что нужно по проекту.
7. Нажать загрузить.
8. Все готово :)
